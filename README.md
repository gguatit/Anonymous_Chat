<div align="center">

# ğŸ”’ ìµëª… ì±„íŒ… (Anonymous Chat)

<img src="public/ico/og-image.png" alt="Anonymous Chat Logo" width="200"/>

[![Cloudflare Workers](https://img.shields.io/badge/Cloudflare-Workers-F38020?style=for-the-badge&logo=cloudflare&logoColor=white)](https://workers.cloudflare.com/)
[![WebSocket](https://img.shields.io/badge/WebSocket-Real--time-4285F4?style=for-the-badge&logo=socket.io&logoColor=white)](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-CSS-06B6D4?style=for-the-badge&logo=tailwindcss&logoColor=white)](https://tailwindcss.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge)](https://opensource.org/licenses/MIT)

**ì™„ì „ ìµëª… ì‹¤ì‹œê°„ ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜**  
ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ë¡œ êµ¬í˜„ëœ ì•ˆì „í•˜ê³  ë¹ ë¥¸ ì›¹ ì±„íŒ…

[ğŸš€ ë°ëª¨ ë³´ê¸°](#) Â· [ğŸ“– ë¬¸ì„œ](#-ëª©ì°¨) Â· [ï¿½ ë²„ê·¸ ì œë³´](https://github.com/gguatit/Anonymous_Chat/issues)

</div>

---

## ï¿½ğŸ“‹ ëª©ì°¨

- [âœ¨ ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ğŸ¯ ì™œ ì´ í”„ë¡œì íŠ¸ì¸ê°€?](#-ì™œ-ì´-í”„ë¡œì íŠ¸ì¸ê°€)
- [ğŸ—ï¸ ì•„í‚¤í…ì²˜](#ï¸-ì•„í‚¤í…ì²˜)
- [ğŸš€ ë¹ ë¥¸ ì‹œì‘](#-ë¹ ë¥¸-ì‹œì‘)
- [ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥](#-ë³´ì•ˆ-ê¸°ëŠ¥)
- [ğŸ–¥ï¸ í”Œë«í¼ í˜¸í™˜ì„±](#ï¸-í”Œë«í¼-í˜¸í™˜ì„±)
- [âš™ï¸ ê³ ê¸‰ ì„¤ì •](#ï¸-ê³ ê¸‰-ì„¤ì •)
- [ğŸ§ª í…ŒìŠ¤íŠ¸](#-í…ŒìŠ¤íŠ¸)
- [ğŸ“¦ ë°°í¬](#-ë°°í¬)
- [ğŸ¤ ê¸°ì—¬](#-ê¸°ì—¬)
- [ğŸ“„ ë¼ì´ì„ ìŠ¤](#-ë¼ì´ì„ ìŠ¤)

---

## ğŸ¯ ì™œ ì´ í”„ë¡œì íŠ¸ì¸ê°€?

> **ì™„ì „ ìµëª…ì„±** Â· **ë°ì´í„° ë¬´ë³´ê´€** Â· **ì„œë²„ë¦¬ìŠ¤** Â· **ì˜¤í”ˆì†ŒìŠ¤**

í˜„ëŒ€ì˜ ì±„íŒ… ì„œë¹„ìŠ¤ëŠ” ëŒ€ë¶€ë¶„ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¤ë¦…ë‹ˆë‹¤:

- ğŸš« **íšŒì›ê°€ì… ë¶ˆí•„ìš”** - ë‹‰ë„¤ì„ë„ í•„ìš” ì—†ìŠµë‹ˆë‹¤
- ğŸ” **ë©”ì‹œì§€ ì˜êµ¬ ë³´ê´€ ì•ˆ í•¨** - 12ì‹œê°„ í›„ ìë™ ì‚­ì œ
- âš¡ **ì—£ì§€ ì»´í“¨íŒ…** - Cloudflareì˜ ì „ ì„¸ê³„ ë°ì´í„°ì„¼í„°ì—ì„œ ì‹¤í–‰
- ğŸŒ **ì €ì§€ì—°** - ê°€ê¹Œìš´ ì„œë²„ì—ì„œ ì‘ë‹µ (í‰ê·  <50ms)
- ğŸ’° **ë¬´ë£Œ í˜¸ìŠ¤íŒ…** - Cloudflare Workers Free Tier í™œìš©

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

<table>
<tr>
<td width="50%">

### ğŸ’¬ ì‹¤ì‹œê°„ ì±„íŒ…
- WebSocket ê¸°ë°˜ ì–‘ë°©í–¥ í†µì‹ 
- í‰ê·  ì§€ì—°ì‹œê°„ <100ms
- ìë™ ì¬ì—°ê²° (ì§€ìˆ˜ì  ë°±ì˜¤í”„)
- íƒ€ì´í•‘ í‘œì‹œ ì‹¤ì‹œê°„ ë™ê¸°í™”

### ğŸ” ì™„ì „ ìµëª…
- íšŒì›ê°€ì… & ë¡œê·¸ì¸ ë¶ˆí•„ìš”
- ë‹‰ë„¤ì„ ì—†ëŠ” ìµëª… ì±„íŒ…
- ì„¸ì…˜ ê¸°ë°˜ ì‹ë³„ë§Œ ì‚¬ìš©
- IP ì£¼ì†Œ ì €ì¥ ì•ˆ í•¨

### â° ì„ì‹œ ë©”ì‹œì§€ ì €ì¥
- ìµœëŒ€ 500ê°œ ë©”ì‹œì§€ ì €ì¥
- 12ì‹œê°„ í›„ ìë™ ì‚­ì œ
- ì…ì¥ ì‹œ ìµœê·¼ 50ê°œ ë©”ì‹œì§€ ì œê³µ
- ë©”ëª¨ë¦¬ ë‚´ ì €ì¥ (DB ì—†ìŒ)

</td>
<td width="50%">

### ï¿½ï¸ ê°•ë ¥í•œ ë³´ì•ˆ
- Rate Limiting (1ì´ˆë‹¹ 1ê°œ, ë¶„ë‹¹ 30ê°œ)
- IPë‹¹ ìµœëŒ€ 5ê°œ ë™ì‹œ ì—°ê²°
- XSS/CSRF ê³µê²© ë°©ì–´
- HMAC-SHA256 ë©”ì‹œì§€ ì„œëª…
- Content Security Policy (CSP)

### ğŸ¨ í˜„ëŒ€ì ì¸ UI/UX
- ë‹¤í¬ í…Œë§ˆ (ëˆˆì˜ í”¼ë¡œ ê°ì†Œ)
- ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼/ë°ìŠ¤í¬í†±)
- Tailwind CSS ê¸°ë°˜
- ì ‘ê·¼ì„± (ARIA) ì¤€ìˆ˜
- ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜

### ğŸ“Š ëª¨ë‹ˆí„°ë§
- ì‹¤ì‹œê°„ ì ‘ì†ì ìˆ˜ í‘œì‹œ
- ì—°ê²° ìƒíƒœ ì¸ë””ì¼€ì´í„°
- ìµëª… ë©”íŠ¸ë¦­ API
- Wrangler tail ë¡œê·¸ ì§€ì›

</td>
</tr>
</table>

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "Client Layer"
        A[ğŸŒ Browser]
    end
    
    subgraph "Cloudflare Edge"
        B[âš¡ Cloudflare Worker<br/>Entry Point]
        C[ğŸ“¦ Static Assets<br/>HTML/CSS/JS]
    end
    
    subgraph "Durable Objects"
        D[ğŸ’¬ ChatRoom<br/>WebSocket Handler]
        E[ğŸ’¾ In-Memory State<br/>Messages & Sessions]
    end
    
    A -->|HTTPS| C
    A -.->|WSS| B
    B -->|Routing| D
    D -->|State| E
    D -.->|Broadcast| A
    
    style A fill:#4285F4,color:#fff
    style B fill:#F38020,color:#fff
    style C fill:#F38020,color:#fff
    style D fill:#10B981,color:#fff
    style E fill:#8B5CF6,color:#fff
```

### ğŸ”„ ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. í´ë¼ì´ì–¸íŠ¸ â”‚ â†’ HTTP(S) â†’ Static Assets (HTML/CSS/JS)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. WebSocket â”‚ â†’ WSS â†’ Worker â†’ IP ê²€ì¦ â†’ Durable Object
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ë©”ì‹œì§€    â”‚ â†’ í´ë¼ì´ì–¸íŠ¸ ê²€ì¦ â†’ ì„œë²„ ê²€ì¦ â†’ ë¸Œë¡œë“œìºìŠ¤íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. íƒ€ì´í•‘    â”‚ â†’ 2ì´ˆ ë””ë°”ìš´ì‹± â†’ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „íŒŒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ§± í•µì‹¬ ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ìœ„ì¹˜ |
|---------|------|------|
| **Cloudflare Worker** | HTTP/WebSocket ì§„ì…ì , ë¼ìš°íŒ… | `src/worker.js` |
| **Durable Object** | ì±„íŒ…ë°© ìƒíƒœ ê´€ë¦¬, ë©”ì‹œì§€ ë¸Œë¡œë“œìºìŠ¤íŠ¸ | `src/worker.js` (ChatRoom) |
| **Static Assets** | HTML, CSS, JavaScript ì •ì  íŒŒì¼ | `public/` |
| **Client App** | WebSocket í´ë¼ì´ì–¸íŠ¸, UI ë Œë”ë§ | `public/js/` |

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ğŸ“¦ ì‚¬ì „ ìš”êµ¬ì‚¬í•­

| ë„êµ¬ | ë²„ì „ | ì„¤ì¹˜ ë°©ë²• |
|------|------|-----------|
| Node.js | 18+ | [nodejs.org](https://nodejs.org/) |
| npm | 9+ | Node.jsì™€ í•¨ê»˜ ì„¤ì¹˜ë¨ |
| Wrangler CLI | ìµœì‹  | `npm install -g wrangler` |
| Cloudflare ê³„ì • | - | [dash.cloudflare.com](https://dash.cloudflare.com/) |

### âš¡ 1ë¶„ ì•ˆì— ì‹œì‘í•˜ê¸°

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/gguatit/Anonymous_Chat.git
cd Anonymous_Chat

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 3. Cloudflare ë¡œê·¸ì¸
wrangler login

# 4. ë¡œì»¬ ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# âœ… ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8787 ì ‘ì†
```

### ğŸ¨ ì»¤ìŠ¤í„°ë§ˆì´ì§•

<details>
<summary><b>ìƒ‰ìƒ í…Œë§ˆ ë³€ê²½</b></summary>

`public/index.html`ì˜ Tailwind ì„¤ì • ìˆ˜ì •:

```javascript
tailwind.config = {
    darkMode: 'class',
    theme: {
        extend: {
            colors: {
                primary: '#your-color',
            }
        }
    }
}
```
</details>

<details>
<summary><b>ë©”ì‹œì§€ ì œí•œ ë³€ê²½</b></summary>

`src/worker.js`ì—ì„œ ìƒìˆ˜ ìˆ˜ì •:

```javascript
const RATE_LIMIT = {
    MAX_MESSAGES_PER_MINUTE: 30,  // ë¶„ë‹¹ ë©”ì‹œì§€ ìˆ˜
    MAX_CONNECTIONS_PER_IP: 5,    // IPë‹¹ ë™ì‹œ ì—°ê²°
    MESSAGE_COOLDOWN: 1000,        // ë©”ì‹œì§€ ê°„ ì¿¨ë‹¤ìš´ (ms)
};
```
</details>

<details>
<summary><b>IP ì°¨ë‹¨/í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì„¤ì •</b></summary>

`src/worker.js`ì—ì„œ ì„¤ì •:

```javascript
const SECURITY = {
    MAX_MESSAGE_LENGTH: 500,
    BANNED_IPS: new Set([
        '192.168.1.1',
        '10.0.0.1'
    ]),
    IP_WHITELIST: null,  // null = ëª¨ë“  IP í—ˆìš©
};
```
</details>

---

## ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥

### ğŸ›¡ï¸ ë‹¤ì¸µ ë³´ì•ˆ ì•„í‚¤í…ì²˜

```
Layer 1: Cloudflare Network
â”œâ”€â”€ DDoS ë³´í˜¸
â”œâ”€â”€ ìë™ SSL/TLS
â””â”€â”€ ê¸€ë¡œë²Œ WAF

Layer 2: Worker (Entry Point)
â”œâ”€â”€ IP ê¸°ë°˜ ì ‘ê·¼ ì œì–´
â”œâ”€â”€ Origin í—¤ë” ê²€ì¦
â””â”€â”€ Rate Limiting

Layer 3: Durable Object
â”œâ”€â”€ ì„¸ì…˜ ê²€ì¦
â”œâ”€â”€ HMAC ë©”ì‹œì§€ ì„œëª…
â””â”€â”€ ì…ë ¥ Sanitization

Layer 4: Client
â”œâ”€â”€ XSS ë°©ì§€ (textContent)
â”œâ”€â”€ CSP (Content Security Policy)
â””â”€â”€ ì§€ìˆ˜ì  ë°±ì˜¤í”„
```

### ğŸ” êµ¬í˜„ëœ ë³´ì•ˆ ê¸°ëŠ¥

<details>
<summary><b>1. MITM (ì¤‘ê°„ì ê³µê²©) ë°©ì–´</b></summary>

#### HTTPS/WSS ê°•ì œ
- ëª¨ë“  HTTP ìš”ì²­ â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
- WebSocketì€ WSS(Secure WebSocket)ë§Œ ì‚¬ìš©
- HSTS í—¤ë”ë¡œ ë¸Œë¼ìš°ì € ê°•ì œ (1ë…„)

```javascript
// HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
if (url.protocol === 'http:' && !url.hostname.includes('localhost')) {
    return Response.redirect(`https://${url.hostname}${url.pathname}`, 301);
}
```

#### HSTS ì„¤ì •
```
Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
```
</details>

<details>
<summary><b>2. ë°ì´í„° ë³€ì¡° ë°©ì§€</b></summary>

#### HMAC-SHA256 ë©”ì‹œì§€ ì„œëª…
- í´ë¼ì´ì–¸íŠ¸: ì „ì†¡ ì „ HMAC ì„œëª… ìƒì„±
- ì„œë²„: ìˆ˜ì‹  ì‹œ ì„œëª… ê²€ì¦
- ë³€ì¡°ëœ ë©”ì‹œì§€ëŠ” ìë™ ê±°ë¶€

```javascript
// ì„œëª… ìƒì„± (í´ë¼ì´ì–¸íŠ¸/ì„œë²„)
const signature = await generateMessageSignature(content, sessionId, timestamp);

// ì„œëª… ê²€ì¦ (ì„œë²„)
const isValid = await verifyMessageSignature(data);
```

#### ì„¸ì…˜ ID ê²€ì¦
- WebSocket ì—°ê²° ì‹œ í• ë‹¹ëœ ì„¸ì…˜ IDì™€ ë©”ì‹œì§€ì˜ ì„¸ì…˜ ID ì¼ì¹˜ í™•ì¸
- íƒ€ì¸ì˜ ì„¸ì…˜ ID ë„ìš© ë¶ˆê°€ëŠ¥
</details>

<details>
<summary><b>3. CSRF (Cross-Site Request Forgery) ë°©ì–´</b></summary>

#### Origin í—¤ë” ê²€ì¦
```javascript
const ALLOWED_ORIGINS = [
    'https://kalpha.mmv.kr',           // í”„ë¡œë•ì…˜
    'http://localhost:8787'             // ê°œë°œ
];

// WebSocket ì—°ê²° ì‹œ Origin ê²€ì¦
if (origin && !isAllowedOrigin(origin)) {
    return new Response('Unauthorized Origin', { status: 403 });
}
```
</details>

<details>
<summary><b>4. XSS (Cross-Site Scripting) ë°©ì–´</b></summary>

#### ì„œë²„ ì¸¡ Sanitization
```javascript
sanitizeInput(input) {
    return input.replace(/[\x00-\x1F\x7F]/g, '').trim();
}
```

#### í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì•ˆì „ ë Œë”ë§
```javascript
// âŒ ìœ„í—˜: innerHTML ì‚¬ìš© ê¸ˆì§€
// element.innerHTML = userInput;

// âœ… ì•ˆì „: textContent ì‚¬ìš©
element.textContent = userInput;
```

#### Content Security Policy (CSP)
```
default-src 'self';
script-src 'self' https://cdn.tailwindcss.com;
connect-src 'self' wss: ws:;
object-src 'none';
```
</details>

<details>
<summary><b>5. Rate Limiting</b></summary>

#### 3ë‹¨ê³„ ì œí•œ
1. **ë©”ì‹œì§€ ì¿¨ë‹¤ìš´**: 1ì´ˆë‹¹ 1ê°œ
2. **ë¶„ë‹¹ ì œí•œ**: 30ê°œ
3. **IPë‹¹ ì—°ê²°**: ìµœëŒ€ 5ê°œ

```javascript
// í´ë¼ì´ì–¸íŠ¸ ì¸¡
if (Date.now() - lastMessageTime < 1000) {
    showError('ë©”ì‹œì§€ë¥¼ ë„ˆë¬´ ë¹ ë¥´ê²Œ ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤');
    return;
}

// ì„œë²„ ì¸¡
if (messagesThisMinute >= MAX_MESSAGES_PER_MINUTE) {
    ws.send(JSON.stringify({
        type: 'error',
        message: 'ë¶„ë‹¹ ë©”ì‹œì§€ ì œí•œ ì´ˆê³¼'
    }));
    return;
}
```
</details>

<details>
<summary><b>6. DoS/DDoS ë°©ì–´</b></summary>

- Cloudflareì˜ ë„¤íŠ¸ì›Œí¬ ë ˆë²¨ DDoS ë³´í˜¸
- IPë‹¹ ë™ì‹œ ì—°ê²° ìˆ˜ ì œí•œ
- ì§€ìˆ˜ì  ë°±ì˜¤í”„ ì¬ì—°ê²° (ìµœëŒ€ 10íšŒ)
- ë©”ì‹œì§€ í¬ê¸° ì œí•œ (500ì)
</details>

### ğŸ“Š ë³´ì•ˆ ê°ì‚¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] HTTPS/WSS ê°•ì œ
- [x] HSTS í—¤ë” ì„¤ì •
- [x] CSP í—¤ë” ì„¤ì •
- [x] Origin ê²€ì¦
- [x] HMAC ë©”ì‹œì§€ ì„œëª…
- [x] XSS ë°©ì–´ (sanitization)
- [x] CSRF ë°©ì–´
- [x] Rate Limiting
- [x] ì…ë ¥ ê²€ì¦
- [x] ì„¸ì…˜ ê´€ë¦¬
- [x] IP ê¸°ë°˜ ì ‘ê·¼ ì œì–´
- [x] ë©”ì‹œì§€ í¬ê¸° ì œí•œ
- [x] ì—°ê²° ìˆ˜ ì œí•œ

---

## ğŸ–¥ï¸ í”Œë«í¼ í˜¸í™˜ì„±

### âœ… ì™„ì „ ì§€ì› (í…ŒìŠ¤íŠ¸ ì™„ë£Œ)

| í”Œë«í¼ | ë²„ì „ | ìƒíƒœ | ë¹„ê³  |
|--------|------|------|------|
| ğŸªŸ Windows | 11 | âœ… | ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ |
| ğŸ§ Arch Linux | Latest | âœ… | ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ |
| ğŸ§ Ubuntu | 20.04+ | âœ… | ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ |
| ğŸ§ Garuda Linux | Latest | âœ… | ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ |
| ğŸ“± Android | 16 | âœ… | ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ |

### âŒ ë¯¸ì§€ì› (í…ŒìŠ¤íŠ¸ ì•ˆ ë¨)

| í”Œë«í¼ | ìƒíƒœ | ë¹„ê³  |
|--------|------|------|
| ğŸ iOS | âŒ | í…ŒìŠ¤íŠ¸ë˜ì§€ ì•ŠìŒ |
| ğŸ macOS | âŒ | í…ŒìŠ¤íŠ¸ë˜ì§€ ì•ŠìŒ |

### ğŸ’¡ ê¶Œì¥ í™˜ê²½

> **ë°ìŠ¤í¬í†± ë° ëª¨ë°”ì¼ ëª¨ë‘ ì™„ë²½í•˜ê²Œ ì§€ì›ë©ë‹ˆë‹¤**  
> Windows, Linux, Androidì—ì„œ ìµœìƒì˜ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤

---

## âš™ï¸ ê³ ê¸‰ ì„¤ì •

### ğŸ”§ í™˜ê²½ ë³€ìˆ˜

`wrangler.toml` ì„¤ì •:

```toml
[env.production]
vars = { ENVIRONMENT = "production" }

[env.development]
vars = { ENVIRONMENT = "development" }
```

### ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Anonymous_Chat/
â”œâ”€â”€ ğŸ“‚ public/                # ì •ì  íŒŒì¼ (Cloudflare Assets)
â”‚   â”œâ”€â”€ ğŸ“„ index.html        # ë©”ì¸ HTML
â”‚   â”œâ”€â”€ ğŸ“‚ js/               # í´ë¼ì´ì–¸íŠ¸ JavaScript
â”‚   â”‚   â”œâ”€â”€ chat.js         # ë©”ì¸ ì§„ì…ì 
â”‚   â”‚   â”œâ”€â”€ websocket.js    # WebSocket í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ session.js      # ì„¸ì…˜ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ ui.js           # UI ë Œë”ë§
â”‚   â”œâ”€â”€ ğŸ“‚ css/              # ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”‚   â”‚   â”œâ”€â”€ base.css        # ê¸°ë³¸ ìŠ¤íƒ€ì¼
â”‚   â”‚   â””â”€â”€ animations.css  # ì• ë‹ˆë©”ì´ì…˜
â”‚   â”œâ”€â”€ ğŸ“‚ ico/              # ì•„ì´ì½˜ íŒŒì¼ë“¤
â”‚   â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”‚   â”œâ”€â”€ apple-touch-icon.png
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ ğŸ“„ manifest.json     # PWA Manifest
â”‚   â”œâ”€â”€ ğŸ“„ _headers          # Cloudflare ë³´ì•ˆ í—¤ë”
â”‚   â””â”€â”€ ğŸ“„ _redirects        # ë¦¬ë‹¤ì´ë ‰íŠ¸ ê·œì¹™
â”œâ”€â”€ ğŸ“‚ src/                  # Worker ì†ŒìŠ¤
â”‚   â””â”€â”€ ğŸ“„ worker.js         # Worker + Durable Object
â”œâ”€â”€ ğŸ“‚ test/                 # í…ŒìŠ¤íŠ¸ íŒŒì¼
â”‚   â””â”€â”€ ğŸ“„ worker.test.js    # Worker í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ğŸ“„ package.json          # í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ ğŸ“„ wrangler.toml         # Cloudflare ì„¤ì •
â”œâ”€â”€ ğŸ“„ vitest.config.js      # í…ŒìŠ¤íŠ¸ ì„¤ì •
â””â”€â”€ ğŸ“„ deploy.sh             # ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
```

### ğŸŒ API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/ws` | GET (WebSocket) | WebSocket ì—°ê²° |
| `/health` | GET | í—¬ìŠ¤ ì²´í¬ |
| `/metrics` | GET | ìµëª… ë©”íŠ¸ë¦­ (ì—°ê²° ìˆ˜, ë©”ì‹œì§€ ìˆ˜) |
| `/` | GET | ì •ì  íŒŒì¼ (HTML) |

#### ë©”íŠ¸ë¦­ API ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "timestamp": 1699264800000,
  "activeConnections": 42,
  "totalMessages": 1337,
  "uptime": 86400
}
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test

# Watch ëª¨ë“œ (íŒŒì¼ ë³€ê²½ ê°ì§€)
npm run test:watch

# ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸
npm run test:coverage
```

### ë¡œì»¬ í…ŒìŠ¤íŠ¸

```bash
# ë¡œì»¬ ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# Wrangler tailë¡œ ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
wrangler tail
```

### E2E í…ŒìŠ¤íŠ¸ (ìˆ˜ë™)

1. **ì—°ê²° í…ŒìŠ¤íŠ¸**: ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ ë„¤íŠ¸ì›Œí¬ íƒ­ â†’ WebSocket ì—°ê²° í™•ì¸
2. **ë©”ì‹œì§€ ì „ì†¡**: ë©”ì‹œì§€ ì…ë ¥ í›„ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜ì‹  í™•ì¸
3. **Rate Limiting**: 1ì´ˆì— 2ê°œ ì´ìƒ ë©”ì‹œì§€ ì „ì†¡ ì‹œë„ â†’ ì—ëŸ¬ í™•ì¸
4. **ì¬ì—°ê²°**: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¸° â†’ ìë™ ì¬ì—°ê²° í™•ì¸

---

## ğŸ“¦ ë°°í¬

### ğŸš€ ë°©ë²• 1: ìë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (ê¶Œì¥)

```bash
# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ (ìµœì´ˆ 1íšŒ)
chmod +x deploy.sh

# ë°°í¬ ì‹¤í–‰
./deploy.sh
```

ìë™ìœ¼ë¡œ ë‹¤ìŒì„ ìˆ˜í–‰:
- âœ… Wrangler ì„¤ì¹˜ í™•ì¸
- âœ… ì¸ì¦ ìƒíƒœ í™•ì¸
- âœ… Worker + Assets ë°°í¬
- âœ… ë°°í¬ URL í‘œì‹œ

### ğŸ“ ë°©ë²• 2: npm ìŠ¤í¬ë¦½íŠ¸

```bash
# í”„ë¡œë•ì…˜ ë°°í¬
npm run deploy

# ê°œë°œ í™˜ê²½ ë°°í¬
npm run deploy:dev
```

### ğŸ¤– ë°©ë²• 3: GitHub Actions (CI/CD)

`.github/workflows/deploy.yml` ìƒì„±:

```yaml
name: Deploy to Cloudflare

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      deployments: write
    name: Deploy to Cloudflare Workers
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run tests
        run: npm test
      
      - name: Deploy
        uses: cloudflare/wrangler-action@v3
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          command: deploy --env production
```

**í•„ìš”í•œ GitHub Secrets:**
- `CLOUDFLARE_API_TOKEN`: Cloudflare API í† í°
- `CLOUDFLARE_ACCOUNT_ID`: Cloudflare ê³„ì • ID

### ï¿½ ë°°í¬ í›„ í™•ì¸

```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
wrangler tail

# ë©”íŠ¸ë¦­ í™•ì¸
curl https://your-worker.workers.dev/metrics

# í—¬ìŠ¤ ì²´í¬
curl https://your-worker.workers.dev/health
```

### ğŸ”„ ë¡¤ë°±

```bash
# ì´ì „ ë°°í¬ ë²„ì „ ëª©ë¡ í™•ì¸
wrangler deployments list

# íŠ¹ì • ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
wrangler rollback [deployment-id]
```

---

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

<details>
<summary><b>â“ WebSocket ì—°ê²°ì´ ì•ˆ ë¼ìš”</b></summary>

**ì›ì¸:**
- Durable Objects ë¯¸í™œì„±í™”
- Origin í—¤ë” ë¶ˆì¼ì¹˜
- IP ì°¨ë‹¨ ëª©ë¡ì— í¬í•¨

**í•´ê²°:**
1. Cloudflare Dashboard â†’ Workers & Pages â†’ Durable Objects í™œì„±í™” í™•ì¸
2. `src/worker.js`ì˜ `ALLOWED_ORIGINS`ì— ë„ë©”ì¸ ì¶”ê°€
3. `BANNED_IPS`ì—ì„œ IP ì œê±°
</details>

<details>
<summary><b>â“ ë©”ì‹œì§€ê°€ ì „ì†¡ë˜ì§€ ì•Šì•„ìš”</b></summary>

**ì›ì¸:**
- Rate Limiting ì œí•œ (1ì´ˆë‹¹ 1ê°œ)
- ë©”ì‹œì§€ ê¸¸ì´ ì´ˆê³¼ (500ì)
- ì„¸ì…˜ ë§Œë£Œ

**í•´ê²°:**
1. 1ì´ˆ ì´ìƒ ê°„ê²©ì„ ë‘ê³  ë©”ì‹œì§€ ì „ì†¡
2. ë©”ì‹œì§€ ê¸¸ì´ 500ì ì´í•˜ë¡œ ì¤„ì´ê¸°
3. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (ìƒˆ ì„¸ì…˜ ìƒì„±)
</details>

<details>
<summary><b>â“ "Rate limit exceeded" ì—ëŸ¬ê°€ ë‚˜ìš”</b></summary>

**ì›ì¸:**
- 1ë¶„ì— 30ê°œ ì´ìƒ ë©”ì‹œì§€ ì „ì†¡
- IPë‹¹ 5ê°œ ì´ìƒ ë™ì‹œ ì—°ê²°

**í•´ê²°:**
1. ì ì‹œ ëŒ€ê¸° (1ë¶„ í›„ ìë™ í•´ì œ)
2. ë¶ˆí•„ìš”í•œ ë¸Œë¼ìš°ì € íƒ­ ë‹«ê¸°
3. `src/worker.js`ì—ì„œ `RATE_LIMIT` ê°’ ì¡°ì • (í•„ìš”ì‹œ)
</details>

<details>
<summary><b>â“ ë°°í¬ ì‹œ "Unauthorized" ì—ëŸ¬ê°€ ë‚˜ìš”</b></summary>

**ì›ì¸:**
- Wrangler ì¸ì¦ ë§Œë£Œ
- API í† í° ê¶Œí•œ ë¶€ì¡±

**í•´ê²°:**
```bash
# ì¬ë¡œê·¸ì¸
wrangler logout
wrangler login

# API í† í° ê¶Œí•œ í™•ì¸ (Workers í¸ì§‘ ê¶Œí•œ í•„ìš”)
```
</details>

<details>
<summary><b>â“ CORS ì—ëŸ¬ê°€ ë°œìƒí•´ìš”</b></summary>

**ì›ì¸:**
- Origin ê²€ì¦ ì‹¤íŒ¨

**í•´ê²°:**
`src/worker.js`ì—ì„œ ë„ë©”ì¸ ì¶”ê°€:
```javascript
const ALLOWED_ORIGINS = [
    'https://your-domain.com',
    'https://kalpha.mmv.kr',
    'http://localhost:8787'
];
```
</details>

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### âš¡ ë‹¬ì„±ëœ ì„±ëŠ¥ ì§€í‘œ

| ì§€í‘œ | ê°’ | ì„¤ëª… |
|------|-----|------|
| **ì²« ë°”ì´íŠ¸ê¹Œì§€ì˜ ì‹œê°„ (TTFB)** | <50ms | Cloudflare Edgeì—ì„œ ì‘ë‹µ |
| **WebSocket ë ˆì´í„´ì‹œ** | <100ms | í‰ê·  ë©”ì‹œì§€ ì „ì†¡ ì‹œê°„ |
| **ë™ì‹œ ì—°ê²°** | 1000+ | Durable Objectë‹¹ |
| **ë©”ì‹œì§€ ì²˜ë¦¬ëŸ‰** | 10,000+/s | ì´ˆë‹¹ ì²˜ë¦¬ ê°€ëŠ¥ ë©”ì‹œì§€ ìˆ˜ |
| **ì½œë“œ ìŠ¤íƒ€íŠ¸** | ~50ms | Worker ì´ˆê¸° ì‹¤í–‰ ì‹œê°„ |

### ğŸ¯ ìµœì í™” ê¸°ë²•

- **ì—£ì§€ ì»´í“¨íŒ…**: ì‚¬ìš©ìì™€ ê°€ì¥ ê°€ê¹Œìš´ Cloudflare ë°ì´í„°ì„¼í„°ì—ì„œ ì‹¤í–‰
- **WebSocket ì—°ê²° í’€ë§**: Durable Objectsë¡œ ì—°ê²° ì¬ì‚¬ìš©
- **ì§€ì—° ë¡œë”©**: ì´ˆê¸° ë¡œë“œ ì‹œ í•„ìˆ˜ ë¦¬ì†ŒìŠ¤ë§Œ ë¡œë“œ
- **ë©”ì‹œì§€ ë°°ì¹­**: ì—¬ëŸ¬ ë©”ì‹œì§€ë¥¼ í•œ ë²ˆì— ë¸Œë¡œë“œìºìŠ¤íŠ¸
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ì˜¤ë˜ëœ ë©”ì‹œì§€ ìë™ ì •ë¦¬ (12ì‹œê°„, 500ê°œ ì œí•œ)

---

## ğŸ¤ ê¸°ì—¬

ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì„¸ìš”:

### ğŸ”¨ ê°œë°œ ì›Œí¬í”Œë¡œìš°

1. **Fork** ì´ ì €ì¥ì†Œ
2. **Clone** í¬í¬í•œ ì €ì¥ì†Œ
   ```bash
   git clone https://github.com/YOUR_USERNAME/Anonymous_Chat.git
   cd Anonymous_Chat
   ```
3. **Branch** ìƒì„±
   ```bash
   git checkout -b feature/amazing-feature
   ```
4. **Commit** ë³€ê²½ì‚¬í•­
   ```bash
   git commit -m 'feat: Add amazing feature'
   ```
5. **Push** to branch
   ```bash
   git push origin feature/amazing-feature
   ```
6. **Pull Request** ìƒì„±

### ğŸ“ ì»¤ë°‹ ì»¨ë²¤ì…˜

[Conventional Commits](https://www.conventionalcommits.org/) ì‚¬ìš©:

```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ë³€ê²½
style: ì½”ë“œ í¬ë§·íŒ… (ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ)
refactor: ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
chore: ë¹Œë“œ/ì„¤ì • ë³€ê²½
```

### ğŸ¨ ì½”ë“œ ìŠ¤íƒ€ì¼

- **JavaScript**: ESLint + Prettier
- **ë“¤ì—¬ì“°ê¸°**: 4 spaces
- **ì„¸ë¯¸ì½œë¡ **: ì‚¬ìš©
- **ë”°ì˜´í‘œ**: ì‘ì€ë”°ì˜´í‘œ (')

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” **MIT License**ë¡œ ë°°í¬ë©ë‹ˆë‹¤.

```
MIT License

Copyright (c) 2024 gguatit

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

ììœ ë¡­ê²Œ ì‚¬ìš©, ìˆ˜ì •, ë°°í¬ ê°€ëŠ¥í•©ë‹ˆë‹¤! ğŸ‰

---

## ğŸ™ í¬ë ˆë”§

### ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- [Cloudflare Workers](https://workers.cloudflare.com/) - ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ…
- [Durable Objects](https://developers.cloudflare.com/durable-objects/) - ìƒíƒœ ê´€ë¦¬
- [Tailwind CSS](https://tailwindcss.com/) - CSS í”„ë ˆì„ì›Œí¬
- [Vitest](https://vitest.dev/) - í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

### ğŸ’¡ ì˜ê°

ì´ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ì •ë³´ ë³´í˜¸ì™€ ìµëª…ì„±ì˜ ì¤‘ìš”ì„±ì—ì„œ ì˜ê°ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

<div align="center">

### ë¬¸ì œê°€ ë°œìƒí–ˆë‚˜ìš”?

[![GitHub Issues](https://img.shields.io/github/issues/gguatit/Anonymous_Chat?style=for-the-badge)](https://github.com/gguatit/Anonymous_Chat/issues)
[![GitHub Discussions](https://img.shields.io/github/discussions/gguatit/Anonymous_Chat?style=for-the-badge)](https://github.com/gguatit/Anonymous_Chat/discussions)

**ë²„ê·¸ ì œë³´** Â· **ê¸°ëŠ¥ ìš”ì²­** Â· **ì§ˆë¬¸**

[ì´ìŠˆ ìƒì„±í•˜ê¸°](https://github.com/gguatit/Anonymous_Chat/issues/new)

</div>

---

<div align="center">

## â­ ë³„í‘œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”!

ì´ í”„ë¡œì íŠ¸ê°€ ë„ì›€ì´ ë˜ì—ˆë‹¤ë©´ â­ï¸ ë³„í‘œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”!

**Made with â¤ï¸ using Cloudflare Workers and Pages**

[ğŸ” ë§¨ ìœ„ë¡œ](#-ìµëª…-ì±„íŒ…-anonymous-chat)

</div>